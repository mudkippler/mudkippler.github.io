<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Bootstrap Navbar - Optimized</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        /* --- Custom Navbar Base --- */
        .custom-navbar {
            position: relative; /* Establishes a positioning context for child elements like the background wrapper. */
            border-bottom: 2px solid #495057; /* Defines the prominent bottom border. */
            background-color: #f8f9fa; /* Fallback background color, also visible if background image has transparency. */
            /* pt-1 (padding-top: 0.25rem) and pb-0 (padding-bottom: 0) are applied via Bootstrap classes in HTML for compactness. */
        }

        /* --- Background Image Styling --- */
        .navbar-background-image-wrapper {
            content: "";
            position: absolute; /* Positioned relative to .custom-navbar. */
            top: 0;
            left: 0;
            width: 100%; /* Spans the full width of .custom-navbar. */
            height: 100%; /* Spans the full height of .custom-navbar. */
            background-image: url('./navbar-bg.png');
            background-size: cover;
            background-position: right;
            opacity: 0.5; /* Semi-transparent background image. */
            z-index: 0; /* Sits behind the actual navbar content but above .custom-navbar's own background-color. */
            overflow: hidden; /* Ensures the background image does not spill outside the navbar bounds. */
        }

        /* --- Navbar Content Container --- */
        .custom-navbar .container {
            position: relative; /* Ensures its content is stacked above the .navbar-background-image-wrapper. */
            z-index: 1; /* Higher z-index than the background wrapper. */
        }

        /* --- General Text Styling for Navbar Elements --- */
        .custom-navbar .navbar-brand,
        .custom-navbar .nav-link {
            color: #212529; /* Default text color for brand and links. */
        }
        .custom-navbar .navbar-brand:hover,
        .custom-navbar .nav-link:hover {
            color: #000; /* Darker text color on hover for brand and links. */
        }

        /* --- Navigation Links --- */
        /* .nav-link styling (pt-1, pb-0, mb-0) is handled by Bootstrap classes in HTML for brevity. */

        /* Active Navigation Link Styling */
        .custom-navbar .nav-link.active {
            color: #000; /* Distinct color for the active link text. */
            /* fw-bold (font-weight: bold) is applied via Bootstrap class in HTML. */
            position: relative; /* Required for positioning the ::after pseudo-element. */
        }

        /* Active Link Indicator Line */
        .custom-navbar .nav-link.active::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -2px; 
            width: 100%;
            height: 4px;   /* Thickness of the active underline. */
            background-color: #495057; /* Same color as the navbar's main bottom border. */
        }
        
        /* --- Dropdown Menus --- */
        .custom-navbar .dropdown-menu {
            background-color: rgba(255, 255, 255, 0.95); /* Slightly opaque white for readability over background. */
            z-index: 1031; /* Ensures dropdown appears above other navbar content and page elements. */
        }

        /* Specific styling for the profile image dropdown toggle to remove default nav-link padding */
        .custom-navbar .profile-image-toggle {
             padding:0 !important; /* Removes all padding to make the image circular and fit neatly. */
        }

        /* --- Buttons & Forms --- */
        /* Custom styling for the search button */
        .custom-navbar .btn-outline-search {
            --bs-btn-color: #495057;
            --bs-btn-border-color: #495057;
            --bs-btn-hover-color: #fff;
            --bs-btn-hover-bg: #495057;
            --bs-btn-hover-border-color: #495057;
            --bs-btn-active-color: #fff;
            --bs-btn-active-bg: #495057;
            --bs-btn-active-border-color: #495057;
        }

        /* Custom styling for the mobile navbar toggler */
        .custom-navbar .navbar-toggler {
            border-color: rgba(73, 80, 87, 0.25); /* Custom border color for the toggler button. */
        }
        .custom-navbar .navbar-toggler-icon {
            /* Customizes the color of the hamburger icon lines. */
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2873, 80, 87, 0.8%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }

        #nav-main-links li > a {
            padding-bottom: 0;
            margin-bottom: 0;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg custom-navbar pt-1 pb-0">
      <div class="navbar-background-image-wrapper"></div>
      <div class="container align-items-center"> 
        <a class="navbar-brand me-auto" href="#">
          <img src="./navbar.png" alt="Company Logo" style="height: 50px;">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse align-items-end" id="navbarSupportedContent">
          <ul id="nav-main-links" class="navbar-nav me-auto"> 
            <li class="nav-item">
              <a class="nav-link active fw-bold" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Products</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                Services
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown1">
                <li><a class="dropdown-item" href="#">Service A</a></li>
                <li><a class="dropdown-item" href="#">Service B</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">Special Projects</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                Resources
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown2">
                <li><a class="dropdown-item" href="#">Blog</a></li>
                <li><a class="dropdown-item" href="#">Case Studies</a></li>
                <li><a class="dropdown-item" href="#">Downloads</a></li>
              </ul>
            </li>
          </ul>

          <div class="d-flex flex-column align-items-end pb-1">
            <div class="nav-item dropdown mb-1"> 
                <a class="nav-link dropdown-toggle profile-image-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="https://placehold.co/30x30/6c757d/ffffff?text=P&font=raleway" class="rounded-circle" alt="Profile" style="width: 30px; height: 30px;">
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                    <li><a class="dropdown-item" href="#">My Profile</a></li>
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#">Logout</a></li>
                </ul>
            </div>
        
            <button class="btn btn-sm btn-outline-secondary mb-1" type="button">More Actions</button> 
        
            <form class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="Search site..." aria-label="Search">
                <button class="btn btn-outline-search" type="submit">Search</button>
            </form>
          </div>
        </div>
      </div>
    </nav>

    <div class="container mt-4">
        <h1>Page Content Below Navbar</h1>
        <p>This is some sample content. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>More content to demonstrate scrolling and dropdown behavior...</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </body>
</html>
